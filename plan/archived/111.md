# Issue #111: 正六角形シーン（6 頂点）と共通ドキュメントを整備する

## Issueスナップショット
- URL: https://github.com/soma-arc/hyperbolic-plane-tile-poc/issues/111
- ラベル想定: type:task, area:ui

### 目的
正六角形シーンを追加し、4/5 頂点シーンと共通するドキュメント・Storybook 解説・テストを整理する。初期状態は原点中心の正六角形、ドラッグ後は一般六角形を許容する。

### In / Out
- In: 正六角形シーン定義、Storybook への統合、Play テスト強化、共通 Docs の整備、パフォーマンスや UI の残 TODO 記録。
- Out: 7 頂点以上のシーン、レンダラーの抜本的改修。

### 完了条件 (DoD)
- [ ] 正六角形シーンが SceneDefinition に登録され UI/Storybook から選択可能。
- [ ] 頂点ドラッグで隣接 2 半平面のみが更新される挙動をユニットテストで保証。
- [ ] Storybook Play で複数頂点を順番にドラッグするシナリオが通る。
- [ ] 共通 Docs に 4/5/6 頂点シーンの使い方と制約を整理。
- [ ] パフォーマンス・UI の残課題があれば TODO or 新 Issue に明記。

### テスト観点
- N=6 で頂点ドラッグを連続実行しても数値誤差や循環 ID が破綻しないこと。
- Storybook Play で複数頂点ドラッグを行った後も Canvas が再描画され続けること。

---

## 実装ステップ
1. **正六角形シーンの定義**
   - 正多角形ユーティリティを用いて 6 頂点のデータセットを構築し、SceneDefinition に `regularHexagonScene` を登録。
   - Scene セレクタおよびアプリ側 UI を更新し、4/5/6 頂点を同カテゴリで表示。
2. **ドラッグ挙動の連続テスト**
   - ユニットテストで頂点を順番に複数回ドラッグし、共有制御点が循環しても破綻しないことを確認。
   - 必要に応じて更新時の `recalculateHalfPlanes` をバッチ処理化し、冪等性を検証。
3. **Storybook Play 強化**
   - Play テストに「頂点 A をドラッグ→戻す」「頂点 B をドラッグ→戻す」といった連続操作を追加。
   - pointer 操作が安定するよう、`await` や `within` などのヘルパーで選択を明示。
4. **Docs/Controls 整備**
   - Storybook Docs タブで 4/5/6 頂点シーン共通の説明（頂点=制御点、plane drag 無効、統一色ハンドル）を記載。
   - 必要ならスクリーンショットや GIF を `docs/pr/111/` に配置するフローを検討（実装は Issue 内で判断）。
5. **残件整理**
   - 頂点が密集した際の視認性改善や軌跡描画など今後の改善点が見つかった場合、新 Issue 案をまとめる。

## リスク・留意点
- N が増えるほど Canvas の再計算が多くなるため、パフォーマンス計測を行い必要なら最適化ポイントを記録。
- Storybook Play で複数頂点を操作する際、ハンドル選択が不安定になる可能性があるため `data-testid` を活用する。

## オープンクエスチョン
- なし（ユーザー回答で仕様確定済み）。
